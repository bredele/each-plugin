<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Each plugin</title>
</head>
<body>
	<input type="range" min="1" max="100" value="2">
	<button class="remove">Remove all</button>
	<button class="remove-pair">Remove pair items</button>
	<ul list>
		<li>
			<span>{label}</span>
		</li>
	</ul>
	<script src="../build/build.js"></script>
	<script>
	  var View = require('view'),
	  		Store = require('store'),
	  		ListPlugin = require('each-plugin');

	  var view = new View();
	  var list = document.querySelector('ul');
	  var input = document.querySelector('input');

	  var store = new Store([{
	  	label: 'github',
	  	href: 'http://github.com/bredele'
	  }, {
	  	label: 'perso',
	  	href: 'http://bredele.github.io'
	  }
	  ]);

    var plug =  new ListPlugin(store);
	  view.attr('list', plug);
	  view.alive(list);


	  list.addEventListener('click', function(ev){
	  	plug.del(ev.target.parentElement);
	  });

	  input.addEventListener('change', function() {
	  	var val = input.value;
	  	var reset = [];
	  	for(var l = val; l--;) {
	  		reset.push({
	  			label: 'index' + l,
	  			href: 'http://bredele.github.io'
	  		});
	  	}
	  	store.reset(reset);
	  });

    document.querySelector('.remove').addEventListener('click', function(){
    	plug.del();
    });

     document.querySelector('.remove-pair').addEventListener('click', function(){
    	plug.del(function(item){
    		return Number(item.get('label').substring(5)) % 2 === 0;
    	});
    });

	</script>
</body>
</html>